<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="css/nameList.css" />
  </head>

  <body>
    <div id="container">
      <h1>참가 신청서</h1>
      <form action="">
        <input
          type="text"
          id="userName"
          placeholder="이름을 입력하세요"
          autocomplete="off"
          required
        />
        <button type="button" onclick="fn_register()">신청</button>
      </form>
      <hr />
      <div id="nameList"></div>
    </div>
    <script>
      function fn_register() {
        // 1단계 새로운 p요소 만들기
        let newP = document.createElement("p");

        // 2단계 텍스트 노드 만들기
        let userName = document.querySelector("#userName");
        let newText = document.createTextNode(userName.value);
        // 3단계 텍스트 노드를 p 요소에 append
        newP.appendChild(newText);

        // 4단계 nameList에 자식요소로 p요소를 append
        let nameList = document.querySelector("#nameList");
        // nameList.appendChild(newP);
        nameList.insertBefore(newP, nameList.childNodes[0]); // 최근 이름이 위로 오도록 변경(윗줄대신 작성한 부분임)
        userName.value = "";

        // 5단계 삭제를 위해서 X를 만든다.
        let delBttn = document.createElement("span");
        let delText = document.createTextNode("X");
        delBttn.setAttribute("class", "del");
        delBttn.appendChild(delText);
        newP.appendChild(delBttn);

        // 6단계 삭제 기능 작성
        let removeBttns = document.querySelectorAll(".del");
        for (i = 0; i < removeBttns.length; i++) {
          removeBttns[i].addEventListener("click", function () {
            if (this.parentNode.parentNode) {
              //현재 노드(this)의 부모노드의 부모노드가 있을 경우 실행
              this.parentNode.parentNode.removeChild(this.parentNode);
            }
          });
        }
      }
    </script>
  </body>
</html>
